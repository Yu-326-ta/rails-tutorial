# Chapter10

## 学び
```
<div class="gravatar_edit">
    <%= gravatar_for @user %>
    <a href="https://gravatar.com/emails" target="_blank">change</a>
</div>
```
などのようにリンクに`target="_blank"`を使うとリンクをクリックしたときに新しいタブ（またはウィンドウ）で開くようになるので、別のWebサイトへリンクするときなどに便利  
* しかし、`target="_blank"`はwindowオブジェクトを扱えてしまうので、フィッシング（Phising）サイトのような、悪意のあるコンテンツを導入されてしまう可能性がある。なのでリンク用のaタグのrel（relationship）属性に、"noopener"と設定することで対応！！  
[「target=”_blank”」には「rel=”noopener”」を！htmlで外部リンクを貼る際の注意点。](https://www.mubag.com/blog/target-blank-noopener/#rel8221noopener8221)


* WebブラウザはRESTの習慣のPATCHリクエストをそのまま送れないので、RailsではPOSTリクエストと隠しinputフィールドを利用して、PATCHリクエストを「偽造」している  
```
<form action="/users/1" accept-charset="UTF-8" method="post">
  <input type="hidden" name="_method" value="patch" />
```
↑ヘルパーで生成されたhtml  

* じゃあ、どうやって新規ユーザー用のPOSTリクエストと編集ユーザー用のPATCHリクエストを区別している？？  
→→Active Recordのnew_record?論理値メソッドで区別
```
$ rails console
>> User.new.new_record?
=> true
>> User.first.new_record?
=> false
```
